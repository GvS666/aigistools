webpackJsonp([7],[function(t,e,n){(function(t){"use strict";function e(){var e=parseInt(t("[name=current]:input").val()),n=parseInt(t("[name=objective]:input").val()),o=(new Date).getTime(),s=f.reduce(function(t,e){return t+Math.max(e[1],o)-Math.max(e[0],o)},0),r=Math.max(n-e,0),a=s/864e5,l=r/Math.max(a,1),u=s/36e5,c=r/Math.max(u,1),h=s/18e5,p=r/Math.max(h,1),d=i(l,3).split(".");t("#norma_per_day").find(".norma-amount-actual").text(d[0]).parent().find(".norma-amount-fraction").text("."+d[1]).parent(),d=i(c,3).split("."),t("#norma_per_hour").find(".norma-amount-actual").text(d[0]).parent().find(".norma-amount-fraction").text("."+d[1]).parent(),d=i(p,3).split("."),t("#norma_per_minute").find(".norma-amount-actual").text(d[0]).parent().find(".norma-amount-fraction").text("."+d[1]).parent(),t("#remains_days").text(i(a,0)),t("#remains_hours").text(i(u,0)),t("#remains_minutes").text(i(60*u,0));var m,g=100*Math.min(e,n),v=parseInt(g/n)||0,y=N-s,b=parseInt(100*y/N)||0;m=100==v?"progress-bar-success":v>=b?"progress-bar-success":v>.7*b?"progress-bar-info":v>.4*b?"progress-bar-warning":"progress-bar-danger",t("#objective_progress > .progress-bar").width(v+"%").removeClass("progress-bar-success progress-bar-info progress-bar-danger progress-bar-warning").addClass(m).children("span").text(v+"%達成"),t("#period_progress > .progress-bar").width(b+"%").children("span").text(b+"%経過");var w=e*N/y;t("#prediction_collection").text(i(Math.floor(w)));var x=Math.min(w/n,1),_=t("#objective_progress").width(),C=_*x-47;t(".pointer").css("left",C+"px");var A=230>_-C?-250:0;t(".pointer-label").css("margin-left",A+"px");var D="";if(n>e&&w>=n){var E,k;f.forEach(function(t){E=E||t[0],k=k||t[1]});var T=n/w*N,P=f.reduce(function(t,e){if(t)return t;var n=e[1]-e[0];return T>n?(T-=n,null):new Date(e[0]+T)},null),I=P.getMonth(),S=P.getDate(),M=P.getHours(),O=P.getMinutes(),R=I+1+"/"+S+" "+(10>M?"0"+M:M)+":"+(10>O?"0"+O:O);D=R+"頃に目標達成できそうよ。"}t("#prediction_completion_date").text(D)}function i(t,e){if(e=e||0,t===1/0||t===-(1/0))return"∞";var n=t.toFixed(e).split("."),i=parseInt(n[0]);return i.toLocaleString()+(1===n.length?"":"."+n[1])}function o(){var e=(new Date).getTime(),n=t("#period_dates");if(f.forEach(function(i){var o=i[1]-i[0],s=100*o/N+"%",r=new Date(i[0]),a=new Date(i[1]-1),l=r.getMonth()+1+"/"+r.getDate()+"-"+(a.getMonth()+1)+"/"+a.getDate(),u=e>=i[0]&&e<i[1],c=e>=i[1],h=u?"progress-bar-active":c?"progress-bar-expired":"progress-bar-remain";t('<div class="progress-bar">').width(s).text(l).addClass(h).appendTo(n)}),t('[data-objective-mode="'+m+'"]').show(),t('[data-objective-mode][data-objective-mode!="'+m+'"]').remove(),t("[name=current]:input").click(function(){this.select()}).TouchSpin({min:0,max:g,step:1}),"achievement"==m){var i=t("[name=objective]:input");t.each(D,function(e,n){t("<option />").attr("value",e).text(n+" ("+e+"個)").appendTo(i)})}else{t("select[name=objective]").click(function(){this.select()});var o=t("#increse_objective_list");E.forEach(function(e){t('<button class="btn btn-default" name="add"  type="button" />').val(e.value).attr("title",e.name).append(t('<i class="fa fa-arrow-up" />')).append(t("<span />").addClass("icon icon-"+e.unit)).appendTo(o)})}t("button[name=add]").click(function(e){e.preventDefault();var n=parseInt(t(this).val()),i=parseInt(t("[name=objective]:input").val());t("[name=objective]:input").val(i+n).trigger("change")}),t("button[name=reset]").click(function(e){e.preventDefault(),t("[name=objective]:input").val(0).trigger("change")}),t("[name=expectation]:input").change(function(){u(),c()}).val("drop");var v=t("#prize_list");E.forEach(function(e){t('<div class="prize-list" />').append(t('<h4 class="prize-list-header" />').text(e.name).append(t('<span class="prize-value" />').text("@"+e.value))).append(t('<div class="prize-list-body" />').attr("data-prize",e.unit)).appendTo(v)});var y=k.reduce(function(t,e){return Math.max(t,e.drops.length)},0),w=t("#map tbody");if(k.forEach(function(e,n){var i=t("<td />").attr("data-chart",n).append(t('<span class="barchart" />')).append(t('<span class="barchart-label" />')).append(t('<span class="marathon" />'));t("<tr />").append(t("<th />").text(e.name)).append(t("<td />").text(""+e.charisma+"/"+e.stamina)).append(function(){for(var n=e.drops.map(function(e){var n=e.icon?t("<i />").attr("title",e.name).addClass("icon icon-"+e.icon):t("<span />").text(e.name),i=e.set?t('<span class="badge" />').text("x"+e.set):null;return t("<td />").append(n).append(i)}),i=e.drops.length;y>i;i++)n.push(t("<td />"));return n}).append(i).appendTo(w)}),t("#map thead th.drops").attr("colspan",y),b){var x=t("#rewards tbody");T.forEach(function(e){t("<tr />").attr("data-amount",e.amount).append(t('<td class="text-right" />').html('<span class="diff"></span> '+e.amount)).append(t("<td />").html('<span class="icon icon-'+e.unit+'"></span>')).appendTo(x)})}var _=t("[name=estimate_map]:input").change(function(){h(),R.estimateMap=parseInt(t(this).val()),r(R)});k.forEach(function(e,n){t("<option />").val(n).text(e.name+" ("+e.charisma+"/"+e.stamina+")").appendTo(_)});for(var C=t("[name=estimate_rank]:input").change(function(){h(),R.estimateRank=parseInt(t(this).val()),r(R)}),A=1;200>=A;A++){var P=p(A),I=d(A),S=""+A+" ("+P+"/"+I+")";t("<option />").val(A).text(S).appendTo(C)}var M=t("[name=estimate_use_crystal]").change(function(){h(),R.estimateUseCrystal=t(this).val(),r(R)}),O=t("[name=estimate_natural_recovery]:input").change(function(){h(),R.estimateNaturalRecovery=this.checked,r(R)});t("*[title]").tooltip();var R=s();t("[name=current]:input").val(R.current),"exchange"==m?t("[name=objective]:input").val(R.objective):t("[name=objective]:input").val([R.objective]),t("[name=current]:input, [name=objective]:input").change(function(){R[this.name]=t(this).val(),r(R),a(),l(),c(),h()}),_.val(R.estimateMap),C.val(R.estimateRank),M.val(R.estimateUseCrystal),O.prop("checked",R.estimateNaturalRecovery),"exchange"==m&&l(),b&&a(),u(),c(),h()}function s(){var e={},n={current:y,objective:v,estimateMap:x,estimateRank:_,estimateUseCrystal:C,estimateNaturalRecovery:A};try{e=JSON.parse(t.cookie(w))}catch(i){}return t.extend(n,e)}function r(e){t.cookie(w,JSON.stringify(e),{expires:30})}function a(){if(b){var e=45,n=9,i=parseInt(t("[name=current]:input").val()),o=t("#rewards tbody");o.find("tr").removeClass("active").each(function(){var o=t(this),s=o.attr("data-amount")-i;if(-e>s)o.hide();else if(0>s)o.css("opacity",.5).show();else if(e>s)o.addClass("active").css("opacity",1).show();else if(e*n>s){var r=1-Math.floor(s/e)*e/(e*(n+1));o.show().css("opacity",r)}else o.hide();var a=0===s?"diff-eq":s>0?"diff-plus":"diff-minus",l=0===s?"":(s>0?"+":"")+s;o.find("span.diff").removeClass("diff-eq diff-plus diff-minus").addClass(a).text(l)})}}function l(){if("exchange"==m){var e=parseInt(t("[name=current]:input").val());E.forEach(function(n){for(var i=t('[data-prize="'+n.unit+'"]').empty(),o=0;e>o;o+=n.value){var s=t("<i />").addClass("icon icon-"+n.unit),r=25*Math.min(e-o,n.value)/n.value;t('<div class="prize-gage" />').append(s.clone().css({position:"absolute",opacity:.2,boxShadow:"none",paddingRight:25-r})).append(s.clone().css({width:r+"px"})).appendTo(i)}})}}function u(){var e=t("[name=expectation]:input").val(),n=1/0,o=0,s="drop"==e?null:e,r=k.map(function(t){var e=t.expectation/(s&&t[s]||1);return n=0,o=Math.max(o,e),e}),a=s?3:2;k.forEach(function(e,s){var l=t("[data-chart="+s+"]"),u=r[s],c=u/(o-n),h=120*c+240;l.find("span.barchart-label").text(i(u,a)+"個"),l.find("span.barchart").css({width:100*c+"%",backgroundColor:"hsla("+h+", 80%, 50%, 0.5)"})})}function c(){var e=parseInt(t("[name=objective]:input").val()),n=parseInt(t("[name=current]:input").val()),o=Math.max(e-n,0);k.forEach(function(e,n){var s=t("[data-chart="+n+"]"),r=o?Math.ceil(o/e.expectation):0;s.find("span.marathon").text("残り"+i(r)+"周")})}function h(){var e=parseInt(t("[name=current]:input").val()),n=parseInt(t("[name=objective]:input").val()),o=k[parseInt(t("[name=estimate_map]:input").val())],s=Math.max(n-e,0),r=Math.ceil(s/o.expectation);t("#estimate_required_marathon").text(i(r));var a=(new Date).getTime(),l=f.reduce(function(t,e){return t+Math.max(e[1],a)-Math.max(e[0],a)},0),u=0+t("[name=estimate_natural_recovery]:input").prop("checked"),c=Math.floor(l/18e4)*u,h=Math.floor(l/36e5)*u,m=parseInt(t("[name=estimate_rank]").val()),g=p(m),v=d(m),y=Math.ceil(o.charisma*r),b=Math.ceil(o.stamina*r),w=t("[name=estimate_use_crystal]:input").val(),x=0+("both"===w||"charisma"===w),_=0+("both"===w||"stamina"===w),C=Math.ceil(Math.max(y-c,0)/g)*x,A=Math.ceil(Math.max(b-h,0)/v)*_,D=C+A;t("#estimate_required_crystal").text(i(D));var E=0===C?"diff-eq":C>0?"diff-plus":"diff-minus";t("#estimate_required_crystal_for_charisma").attr("class",E).text(i(C)),E=0===A?"diff-eq":A>0?"diff-plus":"diff-minus",t("#estimate_required_crystal_for_stamina").attr("class",E).text(i(A));var T=c+g*C,N=h+v*A,P=Math.floor(Math.min(T/o.charisma,N/o.stamina,r));t("#estimate_available_marathon").text(i(P));var I=P-r;E=0===I?"diff-eq":I>0?"diff-plus":"diff-minus";var S=(I>=0?"+":"")+i(I);t("#estimate_available_marathon_diff").attr("class",E).text(S);var M=o.charisma*P;t("#estimate_using_charisma").text(i(M)),I=M-y,E=0===I?"diff-eq":I>0?"diff-plus":"diff-minus",S=(I>=0?"+":"")+i(I),t("#estimate_using_charisma_diff").attr("class",E).text(S);var O=Math.ceil(o.stamina*P);t("#estimate_using_stamina").text(i(O)),I=O-b,E=0===I?"diff-eq":I>0?"diff-plus":"diff-minus",S=(I>=0?"+":"")+i(I),t("#estimate_using_stamina_diff").attr("class",E).text(S);var R=e+Math.ceil(o.expectation*P);t("#estimate_result_collection").text(i(R)),I=R-n,E=0===I?"diff-eq":I>0?"diff-plus":"diff-minus",S=(I>=0?"+":"")+i(I),t("#estimate_result_collection_diff").attr("class",E).text(S)}function p(t){return 27+(100>=t?3*t:300+t-100)}function d(t){return 12+(100>=t?0:Math.floor((t-100)/20)+1)}n(10);var f=[["2015/04/16 15:00:00","2015/04/23 10:00:00"],["2015/04/23 15:00:00","2015/04/30 10:00:00"]].map(function(t){return t.map(Date.parse)}),m="achievement",g=1/0,v=1500,y=20,b=!0,w="talisman-timer",x=0,_=100,C="both",A=!0,D={25:"ナギが仲間になる",50:"スキルレベル2",100:"初期レベル10",150:"スキルレベル3",200:"出撃コスト-1",250:"スキルレベル4",300:"出撃コスト-2",400:"スキルレベル5",500:"初期レベル20",600:"スキルレベル6",700:"出撃コスト-3",800:"スキルレベル7",900:"初期レベル30",1000:"スキルレベル8",1100:"出撃コスト-4",1200:"初期レベル40",1300:"スキルレベル9",1400:"出撃コスト-5",1500:"スキルレベル10",1600:"初期レベル50",1620:"+ 黒精霊",1665:"+ ゴールドアーマー",1710:"+ 黒精霊",1755:"+ プラチナアーマー",1800:"+ 虹精霊"},E=[],k=[{name:"妖怪大決戦",charisma:90,stamina:12,expectation:22,drops:[{name:"封印の札5",icon:"sealing-talisman-5",set:3},{name:"封印の札3",icon:"sealing-talisman-3",set:2},{name:"封印の札1",icon:"sealing-talisman-3",set:1},{name:"虹精霊",icon:"rainbow-sprit"}]},{name:"封妖の忍者",charisma:70,stamina:8,expectation:13,drops:[{name:"封印の札5",icon:"sealing-talisman-5",set:2},{name:"封印の札1",icon:"sealing-talisman-1",set:3},{name:"サノスケ",icon:"sanosuke"},{name:"ニエル",icon:"niel"}]},{name:"妖怪牛鬼",charisma:40,stamina:5,expectation:7,drops:[{name:"封印の札3",icon:"sealing-talisman-3",set:2},{name:"封印の札1",icon:"sealing-talisman-1",set:1},{name:"ローレン",icon:"loren"},{name:"魔水晶",icon:"demon-crystal-1",set:3}]},{name:"大妖怪ぬらりひょん",charisma:50,stamina:7,expectation:11,drops:[{name:"封印の札3",icon:"sealing-talisman-3",set:3},{name:"封印の札1",icon:"sealing-talisman-1",set:2},{name:"カゲロウ",icon:"kagerou"},{name:"プラチナアーマー",icon:"platinum-bucket"}]},{name:"妖怪封じの要石",charisma:40,stamina:4,expectation:5,drops:[{name:"封印の札3",icon:"sealing-talisman-3",set:1},{name:"封印の札1",icon:"sealing-talisman-1",set:2},{name:"ハリッサ",icon:"harissa"},{name:"ヴァレリー",icon:"valerie"}]},{name:"疾風の刃",charisma:30,stamina:2,expectation:2,drops:[{name:"封印の札1",icon:"sealing-talisman-1",set:2},{name:"ロザリー",icon:"rosalie"},{name:"水晶",icon:"crystal"}]},{name:"襲われた住民",charisma:20,stamina:1,expectation:1,drops:[{name:"封印の札1",icon:"sealing-talisman-1",set:2}]}],T=[{amount:45,unit:"gold-bucket"},{amount:90,unit:"gold-sprit"},{amount:135,unit:"platinum-bucket"},{amount:180,unit:"gold-sprit"},{amount:225,unit:"crystal-fragment"},{amount:270,unit:"platinum-sprit"},{amount:315,unit:"gold-bucket"},{amount:360,unit:"platinum-sprit"},{amount:405,unit:"platinum-bucket"},{amount:450,unit:"black-sprit"},{amount:495,unit:"crystal-fragment"},{amount:540,unit:"black-sprit"},{amount:585,unit:"gold-bucket"},{amount:630,unit:"rainbow-sprit"},{amount:675,unit:"platinum-bucket"},{amount:720,unit:"platinum-sprit"},{amount:765,unit:"crystal-fragment"},{amount:810,unit:"platinum-sprit"},{amount:855,unit:"gold-bucket"},{amount:900,unit:"black-sprit"},{amount:945,unit:"platinum-bucket"},{amount:990,unit:"platinum-sprit"},{amount:1035,unit:"crystal-fragment"},{amount:1080,unit:"platinum-sprit"},{amount:1125,unit:"gold-bucket"},{amount:1170,unit:"black-sprit"},{amount:1215,unit:"platinum-bucket"},{amount:1260,unit:"black-sprit"},{amount:1305,unit:"crystal-fragment"},{amount:1350,unit:"rainbow-sprit"},{amount:1395,unit:"gold-bucket"},{amount:1440,unit:"platinum-sprit"},{amount:1485,unit:"platinum-bucket"},{amount:1530,unit:"platinum-sprit"},{amount:1575,unit:"crystal-fragment"},{amount:1620,unit:"black-sprit"},{amount:1665,unit:"gold-bucket"},{amount:1710,unit:"black-sprit"},{amount:1755,unit:"platinum-bucket"},{amount:1800,unit:"rainbow-sprit"}],N=f.reduce(function(t,e){return t+e[1]-e[0]},0);t(function(){o(),setInterval(e,1e3)})}).call(e,n(2))}]);